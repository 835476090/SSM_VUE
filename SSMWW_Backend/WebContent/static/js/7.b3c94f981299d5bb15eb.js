webpackJsonp([7],{"3cXf":function(e,t,s){e.exports={default:s("RJ+u"),__esModule:!0}},"RJ+u":function(e,t,s){var r=s("AKd3"),o=r.JSON||(r.JSON={stringify:JSON.stringify});e.exports=function(e){return o.stringify.apply(o,arguments)}},quXH:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=s("3cXf"),o=s.n(r),a={name:"orderlist",data:function(){return{pagenow:1,pagelimit:10,ordersize:0,pagesizes:[5,10,15,20],resultorders:[],selectOrders:[],pNOrderNum:0,pNRealOrderNum:0,isAll:!1,orderDetails:[{goodsname:"青铜水龙头",price:15,number:3,goodsid:1003},{goodsname:"黄金水龙头",price:30,number:1,goodsid:1004}],dialogTableVisible:!1,titleText:"订单详情",pickerOptions2:{shortcuts:[{text:"最近一周",onClick:function(e){var t=new Date,s=new Date;s.setTime(s.getTime()-6048e5),e.$emit("pick",[s,t])}},{text:"最近一个月",onClick:function(e){var t=new Date,s=new Date;s.setTime(s.getTime()-2592e6),e.$emit("pick",[s,t])}},{text:"最近三个月",onClick:function(e){var t=new Date,s=new Date;s.setTime(s.getTime()-7776e6),e.$emit("pick",[s,t])}}]},selectDate:[],searchText:""}},methods:{test:function(e){console.log(e)},btnsearch:function(){var e=this;Date.prototype.format=function(e){var t={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};for(var s in/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length))),t)new RegExp("("+s+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?t[s]:("00"+t[s]).substr((""+t[s]).length)));return e};var t="",s="";null==this.selectDate?(t="",s=""):2!=this.selectDate.length?(t="",s=""):(t=new Date(this.selectDate[0]).format("yyyy-MM-dd hh:mm:ss"),s=new Date(this.selectDate[1]).format("yyyy-MM-dd hh:mm:ss")),""==this.searchText&&""==t?this.getOrderALL():""==this.searchText||null==this.searchText?this.$axios.get("http://localhost:8080/SSMWW/goodsOrderALLByDate.do?startDate="+t+"&endDate="+s).then(function(t){console.log(t.data),e.resultorders=t.data,e.goodscount=t.data.length}):""==t||""==s?this.$axios.get("http://localhost:8080/SSMWW/goodsOrderALLBySearch.do?searchText="+this.searchText).then(function(t){console.log(t.data),e.resultorders=t.data,e.goodscount=t.data.length}):this.$axios.get("http://localhost:8080/SSMWW/goodsOrderALLBySearchAndDate.do?searchText="+this.searchText+"&startDate="+t+"&endDate="+s).then(function(t){console.log(t.data),e.resultorders=t.data,e.goodscount=t.data.length})},setCellStyle:function(e){e.row,e.column,e.rowIndex;if(4===e.columnIndex)return"color:red"},handleSelectionChange:function(e){console.log(e),this.selectOrders=e},printupdate:function(){console.log("printupdate");var e;if(e=this.selectOrders.map(function(e){return e.ordercode}),console.log(e),0===e.length)this.$notify({title:"打印提示",message:this.$createElement("i",{style:"color: blue"},"请先选择要打印的订单哦"),duration:2e3});else{localStorage.setItem("ordercodes",o()(e));var t=this.$router.resolve({name:"print"});window.open(t.href,"_blank")}},print:function(){var e=this,t=this.selectOrders.map(function(e,t){return!!e&&{val:e,index:t}}).filter(function(e){return!1!==e.val&&e}).map(function(e){return e.index}),s=[];if(parseInt(this.ordersize%this.pagelimit==0?this.ordersize/this.pagelimit:this.ordersize/this.pagelimit+1)==this.pagenow){console.log(this.pagenow,this.pagelimit,this.ordersize,this.pNOrderNum);for(var r=0;r<this.ordersize%this.pagelimit;r++)s[r]=this.resultorders[t[r]].ordercode}else s=t.map(function(t){return e.resultorders[t].ordercode});if(console.log(s),0===s.length)this.$notify({title:"打印提示",message:this.$createElement("i",{style:"color: blue"},"请先选择要打印的订单哦"),duration:2e3});else{localStorage.setItem("ordercodes",o()(s));var a=this.$router.resolve({name:"print"});window.open(a.href,"_blank")}},dodelete:function(e){var t=this;this.$axios.get("http://localhost:8080/SSMWW/deleteOrderDetailsByOrderCode.do?ordercode="+e.ordercode).then(function(e){console.log(e.data);var s=e.data;"200"==s.code&&"删除成功"==s.msg?(t.$message({message:"恭喜你，删除成功",type:"success"}),t.btnsearch()):t.$message({message:"不好意思，删除失败",type:"warning"})})},getDetails:function(e){var t=this;this.dialogTableVisible=!0,this.$axios.get("http://localhost:8080/SSMWW/orderDetailsByOrderCode.do?ordercode="+e.ordercode).then(function(s){console.log(s.data),t.orderDetails=s.data,t.titleText=e.ordercode+"号订单"}).catch(function(e){console.log(e),t.dialogTableVisible=!1,t.$message({message:"此订单已失效,地址或商品已经被删除",type:"warning"})})},getOrderALL:function(){var e=this;this.selectOrders=[],this.$axios.get("http://localhost:8080/SSMWW/goodsOrderALL.do").then(function(t){e.resultorders=t.data})},getOrder:function(){var e=this;this.selectOrders=[],this.$axios.get("http://localhost:8080/SSMWW/goodsOrderALLByPage.do?pageNow="+this.pagenow+"&pageLimit="+this.pagelimit).then(function(t){e.resultorders=t.data,e.pNOrderNum=e.ordersize>e.pagelimit?e.pagelimit:e.ordersize;for(var s=0;s<e.pNOrderNum;s++)e.selectOrders.push(e.isAll)})},getOrderSize:function(){var e=this;this.$axios.get("http://localhost:8080/SSMWW/goodsOrderCount.do").then(function(t){e.ordersize=t.data})}},created:function(){this.getOrderALL()}},l={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticStyle:{"background-color":"#fff"},attrs:{id:"maindiv"}},[s("div",{staticClass:"col-lg-12"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-lg-4",staticStyle:{margin:"5px"}},[s("el-date-picker",{attrs:{type:"daterange",align:"right","unlink-panels":"","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":e.pickerOptions2},model:{value:e.selectDate,callback:function(t){e.selectDate=t},expression:"selectDate"}})],1),e._v(" "),s("div",{staticClass:"col-lg-4",staticStyle:{margin:"2px"}},[s("form",{staticClass:"input-group",on:{submit:function(t){return t.preventDefault(),e.btnsearch(t)}}},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.searchText,expression:"searchText"}],staticClass:"form-control ",attrs:{type:"text",placeholder:"输入收货人或者电话搜索"},domProps:{value:e.searchText},on:{input:function(t){t.target.composing||(e.searchText=t.target.value)}}}),e._v(" "),s("input",{staticClass:"btn btn-outline-success",staticStyle:{"margin-left":"1px"},attrs:{type:"submit",value:"搜索"}})])]),e._v(" "),s("button",{staticClass:"btn btn-sm btn-primary",on:{click:e.getOrderALL}},[e._v("全部订单")])])]),e._v(" "),s("div",{staticClass:"col-lg-12"},[s("el-table",{ref:"multipleTable",staticStyle:{width:"100%","text-align":"center","font-size":"15px"},attrs:{data:e.resultorders,border:"","max-height":"700","tooltip-effect":"dark","cell-style":e.setCellStyle},on:{"selection-change":e.handleSelectionChange}},[s("el-table-column",{attrs:{align:"center",type:"selection",width:"50"}}),e._v(" "),s("el-table-column",{attrs:{align:"center",prop:"ordercode",type:"index",label:"序"}}),e._v(" "),s("el-table-column",{attrs:{align:"center",prop:"ordercode",label:"订单号"}}),e._v(" "),s("el-table-column",{attrs:{align:"center",prop:"confirmdate",label:"下单时间"}}),e._v(" "),s("el-table-column",{attrs:{align:"center",prop:"countprice",label:"总价",width:"70"}}),e._v(" "),s("el-table-column",{attrs:{align:"center",prop:"receivename",label:"收货人"}}),e._v(" "),s("el-table-column",{attrs:{align:"center",prop:"receivephone",label:"收货电话"}}),e._v(" "),s("el-table-column",{attrs:{align:"center",prop:"address",label:"收货地址"}}),e._v(" "),s("el-table-column",{attrs:{align:"center",label:"详情",width:"65"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("button",{staticClass:"btn btn-sm btn-outline-success",on:{click:function(s){e.getDetails(t.row)}}},[e._v("详细")])]}}])}),e._v(" "),s("el-table-column",{attrs:{align:"center",label:"删除",width:"65"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("button",{staticClass:"btn btn-sm btn-outline-danger",on:{click:function(s){e.dodelete(t.row)}}},[e._v("删除")])]}}])})],1)],1),e._v(" "),s("div",{staticClass:"col-lg-12"},[s("el-dialog",{attrs:{title:e.titleText,visible:e.dialogTableVisible},on:{"update:visible":function(t){e.dialogTableVisible=t}}},[s("el-table",{attrs:{data:e.orderDetails}},[s("el-table-column",{attrs:{property:"goodsname",label:"商品名称"}}),e._v(" "),s("el-table-column",{attrs:{property:"goodsid",label:"商品编号",width:"200"}}),e._v(" "),s("el-table-column",{staticStyle:{color:"red"},attrs:{property:"price",label:"单价",width:"80"}}),e._v(" "),s("el-table-column",{attrs:{property:"number",label:"个数",width:"80"}})],1)],1),e._v(" "),s("div",{attrs:{id:"print"}},[s("button",{staticClass:"btn btn-outline-info",staticStyle:{"margin-top":"10px"},attrs:{type:"button"},on:{click:function(t){e.printupdate()}}},[e._v("打印所选项")])])],1)])},staticRenderFns:[]},i=s("C7Lr")(a,l,!1,null,null,null);t.default=i.exports}});