webpackJsonp([0],{"Cl/E":function(s,t,o){var e=o("5pnV"),a=o("/r4/"),i=o("XvZ9").f;s.exports=function(s){return function(t){for(var o,n=a(t),l=e(n),c=l.length,r=0,g=[];c>r;)i.call(n,o=l[r++])&&g.push(s?[o,n[o]]:n[o]);return g}}},MgeX:function(s,t,o){s.exports={default:o("XEbU"),__esModule:!0}},NWpI:function(s,t,o){var e=o("FITv"),a=o("Cl/E")(!1);e(e.S,"Object",{values:function(s){return a(s)}})},PVTz:function(s,t){},XEbU:function(s,t,o){o("NWpI"),s.exports=o("AKd3").Object.values},XXfk:function(s,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var e=o("MgeX"),a=o.n(e),i={name:"goodslist",data:function(){return{pagenow:1,pagelimit:10,goodscount:0,pagecount:1,goodsALLcount:0,nowclass:"全部",pagesizes:[5,10,15,20],resultgoods:[],goodsClassJO:{},dialogFormVisible:!1,isNewClass:!1,selectclass:"全部",newclass:"",form:{"商品名称":"","商品编号":"","商品价格":"","商品单位":"","商品品牌":""},btnText:"新建分类 ",editerIndex:0}},methods:{btnChange:function(){this.isNewClass=!this.isNewClass,this.btnText="选择分类"==this.btnText?"新建分类":"选择分类"},doediter:function(){var s=this;console.log(this.isNewClass?this.newclass:this.selectclass);var t=this.form,o=t.商品名称,e=t.商品编号,a=t.商品价格,i=t.商品单位,n=t.商品品牌,l={};if(""==this.form.商品名称||""==this.form.商品编号||""==this.form.商品价格||""==this.form.商品单位||""==this.form.商品品牌)this.$message({message:"编辑框内容不能为空",type:"warning"});else{if(this.isNewClass){if("全部"==this.selectclass||""==this.selectclass)return void this.$message({message:"请先选择分类",type:"warning"})}else if("全部"==this.selectclass||""==this.selectclass)return void this.$message({message:"请先选择分类",type:"warning"});l.goodsclass=this.isNewClass?this.newclass:this.selectclass,l.goodsname=o,l.goodsid=e,l.price=parseFloat(a),l.unit=i,l.brand=n,console.log(l),this.$axios.post("http://localhost:8080/SSMWW/updateGoods.do",l).then(function(t){var o=t.data;console.log(o),"200"==o.code&&"更新成功"==o.msg?(s.$message({message:"恭喜你，更改成功",type:"success"}),"全部"===s.nowclass?s.getGoodsAll():s.getGoodsByClass(s.nowclass),s.innerGetGoodsClass()):s.$message({message:"不好意思，更改失败",type:"warning"}),s.dialogFormVisible=!1})}},editer:function(s){console.log(this.nowclass),this.selectclass=this.nowclass,this.dialogFormVisible=!0,this.editerIndex=s,this.form.商品名称=this.resultgoods[s].goodsname,this.form.商品编号=this.resultgoods[s].goodsid,this.form.商品价格=this.resultgoods[s].price,this.form.商品单位=this.resultgoods[s].unit,this.form.商品品牌=this.resultgoods[s].brand},dodelete:function(s){var t=this,o={};o.goodsid=this.resultgoods[s].goodsid,this.$axios.post("http://localhost:8080/SSMWW/deleteGoodsById.do",o).then(function(s){var o=s.data;console.log(o),"200"==o.code&&"删除成功"==o.msg?(t.$message({message:"恭喜你，删除成功",type:"success"}),"全部"===t.nowclass?t.getGoodsAll():t.getGoodsByClass(t.nowclass),t.innerGetGoodsClass()):t.$message({message:"不好意思，删除失败",type:"warning"})})},handleSizeChange:function(s){console.log("每页 "+s+" 条"),this.pagelimit=s,"全部"===this.nowclass?this.getGoodsAll():this.getGoodsByClass(s)},handleCurrentChange:function(s){console.log("当前页: "+s),this.pagenow=s,"全部"===this.nowclass?this.getGoodsAll():this.getGoodsByClass(s)},getGoodsAll:function(){var s=this;this.nowclass="全部",this.$axios.get("http://localhost:8080/SSMWW/goodsALLByPage.do?pageNow="+this.pagenow+"&pageLimit="+this.pagelimit).then(function(t){s.resultgoods=t.data,s.goodscount=s.goodsALLcount,s.pagecount=s.goodscount%s.pagelimit==0?s.pagecount=s.goodscount/s.pagelimit:s.pagecount=parseInt(s.goodscount/s.pagelimit)+1})},getGoodsByClass:function(s){var t=this;this.nowclass=s,this.$axios.get("http://localhost:8080/SSMWW/goodsByClassAndPage.do?goodsclass="+s+"&pageNow="+this.pagenow+"&pageLimit="+this.pagelimit).then(function(s){t.resultgoods=s.data,t.goodscount=t.resultgoods.length,t.pagecount=t.goodscount%t.pagelimit==0?t.pagecount=t.goodscount/t.pagelimit:t.pagecount=parseInt(t.goodscount/t.pagelimit)+1})},innerGetGoodsClass:function(){var s=this;this.$axios.get("http://localhost:8080/SSMWW/goodsClassALLMap.do").then(function(t){s.goodsClassJO=t.data,s.goodsALLcount=0;for(var o=a()(s.goodsClassJO),e=0;e<o.length;e++)s.goodsALLcount+=o[e];s.pagecount=s.goodsALLcount%s.pagelimit==0?s.pagecount=s.goodsALLcount/s.pagelimit:s.pagecount=parseInt(s.goodsALLcount/s.pagelimit)+1,s.goodscount=s.goodsALLcount})}},created:function(){var s=this;this.innerGetGoodsClass(),this.$axios.get("http://localhost:8080/SSMWW/goodsALLByPage.do?pageNow="+this.pagenow+"&pageLimit="+this.pagelimit).then(function(t){s.resultgoods=t.data,console.log(t.data)})}},n={render:function(){var s=this,t=s.$createElement,o=s._self._c||t;return o("div",[o("div",{staticClass:"row"},[o("div",{staticClass:"col-lg-10"},[o("table",{staticClass:"table",staticStyle:{"background-color":"#fff"}},[s._m(0),s._v(" "),o("tbody",s._l(s.resultgoods,function(t,e){return o("tr",[o("td",[s._v(s._s(t.goodsname))]),s._v(" "),o("td",[o("small",[o("i",[s._v(s._s(t.goodsid))])])]),s._v(" "),o("td",[s._v(s._s(t.price))]),s._v(" "),o("th",[s._v(s._s(t.unit))]),s._v(" "),o("th",[s._v(s._s(t.brand))]),s._v(" "),o("td",[o("button",{staticClass:"btn btn-sm btn-outline-success",on:{click:function(t){s.editer(e)}}},[s._v("修改")]),s._v(" "),o("button",{staticClass:"btn btn-sm btn-outline-danger",on:{click:function(t){s.dodelete(e)}}},[s._v("删除")])])])}))]),s._v(" "),o("div",{staticClass:"center offset-md-2"},[o("el-pagination",{attrs:{"current-page":s.pagenow,"page-sizes":s.pagesizes,"page-size":s.pagelimit,layout:"total, sizes, prev, pager, next, jumper",total:s.goodscount},on:{"size-change":s.handleSizeChange,"current-change":s.handleCurrentChange}})],1)]),s._v(" "),o("div",{staticClass:"col-lg-2"},[o("div",{staticClass:"list-group"},[o("button",{staticClass:"list-group-item list-group-item-action",on:{click:function(t){s.getGoodsAll()}}},[s._v("\n\t\t\t    全部\n\t\t\t    "),o("span",{staticClass:"badge badge-pill badge-warning"},[s._v(s._s(s.goodsALLcount))])]),s._v(" "),s._l(s.goodsClassJO,function(t,e){return o("button",{staticClass:"list-group-item list-group-item-action",on:{click:function(t){s.getGoodsByClass(e)}}},[s._v("\n\t\t\t\t  "+s._s(e)),o("span",{staticClass:"badge badge-pill badge-warning"},[s._v(s._s(t))])])})],2),s._v(" "),o("br")]),s._v(" "),o("el-dialog",{attrs:{title:"商品修改",visible:s.dialogFormVisible},on:{"update:visible":function(t){s.dialogFormVisible=t}}},[o("form",[o("div",{staticClass:"form-group row"},[o("div",{staticClass:"input-group col-sm-10 offset-sm-1"},[o("select",{directives:[{name:"model",rawName:"v-model",value:s.selectclass,expression:"selectclass"},{name:"show",rawName:"v-show",value:!s.isNewClass,expression:"!isNewClass"}],staticClass:"custom-select col-sm-5",attrs:{id:"inlineFormCustomSelect"},on:{change:function(t){var o=Array.prototype.filter.call(t.target.options,function(s){return s.selected}).map(function(s){return"_value"in s?s._value:s.value});s.selectclass=t.target.multiple?o:o[0]}}},s._l(s.goodsClassJO,function(t,e,a){return o("option",[s._v(s._s(e))])})),s._v(" "),o("input",{directives:[{name:"show",rawName:"v-show",value:s.isNewClass,expression:"isNewClass"},{name:"model",rawName:"v-model:value",value:s.newclass,expression:"newclass",arg:"value"}],staticClass:"form-control col-sm-5 offset-sm-1",attrs:{type:"text",placeholder:"新分类名称"},domProps:{value:s.newclass},on:{input:function(t){t.target.composing||(s.newclass=t.target.value)}}}),s._v(" "),o("span",{staticClass:" col-sm-5"}),s._v(" "),o("el-button",{on:{click:s.btnChange}},[s._v(s._s(s.btnText))])],1)]),s._v(" "),s._l(s.form,function(t,e,a){return o("div",{staticClass:"form-group row"},[o("label",{staticClass:"col-sm-2 offset-sm-1 col-form-label",attrs:{for:"aaa"}},[s._v(s._s(e))]),s._v(" "),o("div",{staticClass:"col-sm-8"},[o("input",{directives:[{name:"model",rawName:"v-model:value",value:s.form[e],expression:"form[key]",arg:"value"}],staticClass:"form-control",attrs:{type:"text",id:"aaa",disabled:"商品编号"==e},domProps:{value:s.form[e]},on:{input:function(t){t.target.composing||s.$set(s.form,e,t.target.value)}}})])])})],2),s._v(" "),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(t){s.dialogFormVisible=!1}}},[s._v("取 消")]),s._v(" "),o("el-button",{attrs:{type:"primary"},on:{click:function(t){s.doediter()}}},[s._v("确 定")])],1)])],1)])},staticRenderFns:[function(){var s=this,t=s.$createElement,o=s._self._c||t;return o("thead",{staticClass:"thead-default"},[o("tr",[o("th",[s._v("商品名称")]),s._v(" "),o("th",[s._v("商品编号")]),s._v(" "),o("th",[s._v("价格")]),s._v(" "),o("th",[s._v("单位")]),s._v(" "),o("th",[s._v("品牌")]),s._v(" "),o("th",[s._v("编辑")])])])}]};var l=o("C7Lr")(i,n,!1,function(s){o("PVTz")},null,null);t.default=l.exports}});